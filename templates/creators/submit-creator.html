{% extends "base.html" %}
{% block content %}
<main class="flex flex-col gap-8 px-4 py-8 md:py-12 max-w-5xl mx-auto">
    <div class="flex flex-wrap justify-between gap-4">
        <div class="flex flex-col gap-3">
            <p
                class="text-panafrican-black dark:text-background-light text-4xl font-black leading-tight tracking-[-0.033em]">
                Nominate a Creator</p>
            <p class="text-text-subtle dark:text-text-subtle text-base font-normal leading-normal max-w-2xl">
                Help us discover amazing African open-source creators! Submit their profile and optionally add their
                projects. All nominations require admin verification.
            </p>
        </div>
    </div>

    {% if messages %}
    {% for message in messages %}
    <div
        class="p-4 rounded-lg {% if message.tags == 'success' %}bg-panafrican-green/10 border border-panafrican-green text-panafrican-green{% else %}bg-red-100 border border-red-400 text-red-700{% endif %}">
        {{ message }}
    </div>
    {% endfor %}
    {% endif %}

    <form method="post" enctype="multipart/form-data" class="flex flex-col gap-8">
        {% csrf_token %}

        {% if form.non_field_errors %}
        <div class="p-4 rounded-lg bg-red-100 border border-red-400 text-red-700">
            {{ form.non_field_errors }}
        </div>
        {% endif %}

        <div class="flex flex-col gap-6">
            <h2
                class="text-panafrican-black dark:text-background-light text-xl font-bold leading-tight tracking-[-0.015em]">
                Creator Information</h2>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <label class="flex flex-col min-w-40 flex-1">
                    <p
                        class="text-panafrican-black dark:text-background-light text-base font-medium leading-normal pb-2">
                        {{ form.name.label }}</p>
                    {{ form.name }}
                    {% if form.name.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.name.errors.0 }}</p>
                    {% endif %}
                </label>

                <label class="flex flex-col min-w-40 flex-1">
                    <p
                        class="text-panafrican-black dark:text-background-light text-base font-medium leading-normal pb-2">
                        {{ form.job_title.label }}</p>
                    {{ form.job_title }}
                    {% if form.job_title.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.job_title.errors.0 }}</p>
                    {% endif %}
                </label>
            </div>

            <label class="flex flex-col min-w-40 w-full">
                <p class="text-panafrican-black dark:text-background-light text-base font-medium leading-normal pb-2">
                    {{ form.bio.label }}</p>
                {{ form.bio }}
                {% if form.bio.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.bio.errors.0 }}</p>
                {% endif %}
            </label>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <label class="flex flex-col min-w-40 flex-1">
                    <p
                        class="text-panafrican-black dark:text-background-light text-base font-medium leading-normal pb-2">
                        {{ form.country.label }}</p>
                    {{ form.country }}
                    {% if form.country.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.country.errors.0 }}</p>
                    {% endif %}
                </label>

                <label class="flex flex-col min-w-40 flex-1">
                    <p
                        class="text-panafrican-black dark:text-background-light text-base font-medium leading-normal pb-2">
                        {{ form.website_url.label }}</p>
                    {{ form.website_url }}
                    {% if form.website_url.errors %}
                    <p class="text-red-600 text-sm mt-1">{{ form.website_url.errors.0 }}</p>
                    {% endif %}
                </label>
            </div>

            <label class="flex flex-col min-w-40 w-full">
                <p class="text-panafrican-black dark:text-background-light text-base font-medium leading-normal pb-2">
                    {{ form.skills_and_interests.label }}</p>
                {{ form.skills_and_interests }}
                {% if form.skills_and_interests.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.skills_and_interests.errors.0 }}</p>
                {% endif %}
                <p class="text-text-subtle text-sm mt-1">Comma-separated list of skills and interests</p>
            </label>

            <label class="flex flex-col min-w-40 w-full">
                <p class="text-panafrican-black dark:text-background-light text-base font-medium leading-normal pb-2">
                    {{ form.image.label }}</p>
                {{ form.image }}
                {% if form.image.errors %}
                <p class="text-red-600 text-sm mt-1">{{ form.image.errors.0 }}</p>
                {% endif %}
                <p class="text-text-subtle text-sm mt-1">Profile photo (optional)</p>
            </label>
        </div>

        <hr class="border-border-color/50 dark:border-panafrican-yellow/20" />

        <!-- Projects Section -->
        <div class="flex flex-col gap-6">
            <div class="flex flex-col gap-2">
                <h2
                    class="text-panafrican-black dark:text-background-light text-xl font-bold leading-tight tracking-[-0.015em]">
                    Creator's Projects (Optional)</h2>
                <p class="text-text-subtle dark:text-text-subtle text-sm">
                    Add up to 2 projects for this creator. You can always add more projects later.
                </p>
            </div>

            {{ formset.management_form }}

            {% for project_form in formset %}
            <div
                class="p-6 rounded-lg border-2 border-border-color dark:border-panafrican-black/50 bg-white/50 dark:bg-panafrican-black/20">
                <h3 class="text-panafrican-black dark:text-background-light text-lg font-semibold mb-4">
                    Project {{ forloop.counter }}</h3>

                <div class="flex flex-col gap-4">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="flex flex-col">
                            <p class="text-panafrican-black dark:text-background-light text-sm font-medium pb-2">
                                Project Name</p>
                            {{ project_form.name }}
                            {% if project_form.name.errors %}
                            <p class="text-red-600 text-xs mt-1">{{ project_form.name.errors.0 }}</p>
                            {% endif %}
                        </label>

                        <label class="flex flex-col">
                            <p class="text-panafrican-black dark:text-background-light text-sm font-medium pb-2">
                                Repository URL</p>
                            {{ project_form.repository_url }}
                            {% if project_form.repository_url.errors %}
                            <p class="text-red-600 text-xs mt-1">{{ project_form.repository_url.errors.0 }}</p>
                            {% endif %}
                        </label>
                    </div>

                    <label class="flex flex-col">
                        <p class="text-panafrican-black dark:text-background-light text-sm font-medium pb-2">
                            Short Description</p>
                        {{ project_form.about }}
                        {% if project_form.about.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ project_form.about.errors.0 }}</p>
                        {% endif %}
                    </label>

                    <label class="flex flex-col">
                        <p class="text-panafrican-black dark:text-background-light text-sm font-medium pb-2">
                            Full Description</p>
                        {{ project_form.description }}
                        {% if project_form.description.errors %}
                        <p class="text-red-600 text-xs mt-1">{{ project_form.description.errors.0 }}</p>
                        {% endif %}
                    </label>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <label class="flex flex-col">
                            <p class="text-panafrican-black dark:text-background-light text-sm font-medium pb-2">
                                Tech Stack</p>
                            {{ project_form.tech_stack }}
                            {% if project_form.tech_stack.errors %}
                            <p class="text-red-600 text-xs mt-1">{{ project_form.tech_stack.errors.0 }}</p>
                            {% endif %}
                        </label>

                        <label class="flex flex-col">
                            <p class="text-panafrican-black dark:text-background-light text-sm font-medium pb-2">
                                Live Demo URL (Optional)</p>
                            {{ project_form.live_demo_url }}
                            {% if project_form.live_demo_url.errors %}
                            <p class="text-red-600 text-xs mt-1">{{ project_form.live_demo_url.errors.0 }}</p>
                            {% endif %}
                        </label>
                    </div>

                    {{ project_form.id }}
                    {{ project_form.DELETE }}
                </div>
            </div>
            {% endfor %}
        </div>

        <hr class="border-border-color/50 dark:border-panafrican-yellow/20" />

        <div class="flex items-center justify-end gap-4 pt-4">
            <a href="{% url 'explore-creators' %}"
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-6 bg-transparent text-red-600 dark:text-red-400 text-base font-bold leading-normal tracking-[0.015em] hover:bg-red-50 dark:hover:bg-red-900/20 border-2 border-red-600 dark:border-red-400 shadow-sm hover:shadow-md transition-all">
                <span class="truncate">Cancel</span>
            </a>
            <button type="submit"
                class="flex min-w-[84px] max-w-[480px] cursor-pointer items-center justify-center overflow-hidden rounded-lg h-12 px-8 bg-panafrican-green text-primary-black text-base font-bold leading-normal tracking-[0.015em] hover:opacity-90 dark:bg-panafrican-yellow dark:text-panafrican-black shadow-md hover:shadow-lg transition-all">
                <span class="truncate">Submit Creator & Projects</span>
            </button>
        </div>
    </form>
</main>
{% endblock %}